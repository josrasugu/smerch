{"ast":null,"code":"import _asyncToGenerator from \"C:\\\\node\\\\smerch-front\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\asyncToGenerator.js\";\nimport { SystConfig } from '../../config/syst';\nimport { HttpHeaders } from '@angular/common/http';\nimport { MAT_DIALOG_DATA } from '@angular/material/dialog';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/router\";\nimport * as i2 from \"@angular/common/http\";\nimport * as i3 from \"@angular/material/dialog\";\nimport * as i4 from \"@angular/forms\";\nimport * as i5 from \"@angular/common\";\nconst _c0 = [\"canvasEl\"];\nconst _c1 = [\"templates\"];\n\nfunction DesignComponent_div_10_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r7 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"div\", 13);\n    i0.ɵɵlistener(\"click\", function DesignComponent_div_10_Template_div_click_0_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r7);\n      const color_r4 = restoredCtx.$implicit;\n      const ctx_r6 = i0.ɵɵnextContext();\n      return ctx_r6.switchVariant(\"NULL\", color_r4, \"NULL\");\n    });\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const color_r4 = ctx.$implicit;\n    const i_r5 = ctx.index;\n    i0.ɵɵstyleMapInterpolate1(\"background-color:\", color_r4, \"; height: 20px; width: 30px; margin: 2px; float: left; border-radius: 3px; cursor: pointer;\");\n    i0.ɵɵpropertyInterpolate(\"id\", i_r5);\n  }\n}\n\nfunction DesignComponent_div_15_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r11 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"div\", 14)(1, \"input\", 15);\n    i0.ɵɵlistener(\"mouseup\", function DesignComponent_div_15_Template_input_mouseup_1_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r11);\n      const size_r8 = restoredCtx.$implicit;\n      const ctx_r10 = i0.ɵɵnextContext();\n      return ctx_r10.switchVariant(\"NULL\", \"NULL\", size_r8);\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(2, \"label\", 16);\n    i0.ɵɵtext(3);\n    i0.ɵɵelementEnd()();\n  }\n\n  if (rf & 2) {\n    const size_r8 = ctx.$implicit;\n    const s_r9 = ctx.index;\n    i0.ɵɵadvance(1);\n    i0.ɵɵpropertyInterpolate(\"id\", s_r9);\n    i0.ɵɵpropertyInterpolate(\"name\", s_r9);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\" \", size_r8, \" \");\n  }\n}\n\nfunction DesignComponent_li_24_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r15 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"li\", 17);\n    i0.ɵɵlistener(\"click\", function DesignComponent_li_24_Template_li_click_0_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r15);\n      const template_r12 = restoredCtx.$implicit;\n      const d_r13 = restoredCtx.index;\n      const ctx_r14 = i0.ɵɵnextContext();\n      return ctx_r14.switchTemplate(template_r12.template_id, d_r13);\n    });\n    i0.ɵɵelementStart(1, \"span\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd()();\n  }\n\n  if (rf & 2) {\n    const template_r12 = ctx.$implicit;\n    const d_r13 = ctx.index;\n    i0.ɵɵadvance(1);\n    i0.ɵɵclassMapInterpolate1(\"nav-link \", d_r13 == 0 ? \"active\" : \"\", \"\");\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(template_r12.placement);\n  }\n}\n\nfunction MockupDialog_div_13_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 9);\n    i0.ɵɵelement(1, \"img\", 10);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const mockup_r1 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵpropertyInterpolate(\"src\", mockup_r1.mockup_url, i0.ɵɵsanitizeUrl);\n  }\n}\n\nexport class DesignComponent {\n  constructor(renderer, el, route, http, dialog) {\n    this.renderer = renderer;\n    this.el = el;\n    this.route = route;\n    this.http = http;\n    this.dialog = dialog;\n    this.dragging = false;\n    this.designSelected = false;\n    this.resize = false;\n    this.resizeDrag = false;\n    this.lastX = 0;\n    this.lastY = 0;\n    this.marginLeft = 0;\n    this.marginTop = 0;\n    this.canvasoffsetLeft = 0;\n    this.canvasoffsetTop = 0;\n    this.placementX = 0;\n    this.placementY = 0;\n    this.designImgOriginalWidth = 0;\n    this.designImgOriginalHeight = 0;\n    this.designImgWidth = 0;\n    this.designImgHeight = 0;\n    this.designImgScale = 1;\n    this.variantColors = [];\n    this.variantSizes = [];\n    this.selectedColors = [];\n    this.selectedSizes = [];\n    this.ratioScale = 0;\n    this.apiUrl = SystConfig.apiUrl;\n    this.apiPrintfulUrl = SystConfig.apiPrintfulUrl;\n    this.canvasEl = {};\n\n    this.getBase64FromUrl = /*#__PURE__*/function () {\n      var _ref = _asyncToGenerator(function* (url) {\n        const data = yield fetch(url);\n        const blob = yield data.blob();\n        return new Promise(resolve => {\n          const reader = new FileReader();\n          reader.readAsDataURL(blob);\n\n          reader.onloadend = () => {\n            const base64data = reader.result;\n            resolve(base64data);\n          };\n        });\n      });\n\n      return function (_x) {\n        return _ref.apply(this, arguments);\n      };\n    }();\n  }\n\n  genHeders(token_key) {\n    this.generatedHeader = {\n      headers: new HttpHeaders({\n        'Content-Type': 'application/json',\n        'Access-Control-Allow-Origin': '*',\n        'Authorization': token_key\n      })\n    };\n    return this.generatedHeader;\n  }\n\n  ngOnInit() {}\n\n  ngAfterViewInit() {\n    // console.log(this.template);\n    this.route.params.subscribe(params => {\n      this.productId = params['productId'];\n      this.getAsset(params['address'], params['token']).subscribe(val => {\n        this.asset = val;\n        this.designImage = this.asset.image_url; // console.log(this.asset);\n        // this.assetsView = false;\n        // this.assetView = true;\n      }, response => {}, () => {// console.log(\"The observable is now completed.\");\n      });\n      this.getProduct(params['productId']).subscribe(val => {\n        this.serverData = val; // console.log(this.serverData.result.product);\n\n        console.log(this.serverData.result.variants);\n        let self = this;\n        this.serverData.result.variants.forEach(function (variant) {\n          var checkColorExist = false;\n          var checkSizeExist = false;\n\n          for (let c = 0; c < self.variantColors.length; c++) {\n            if (self.variantColors[c] == variant.color_code) {\n              checkColorExist = true;\n            }\n          }\n\n          for (let s = 0; s < self.variantSizes.length; s++) {\n            if (self.variantSizes[s] == variant.size) {\n              checkSizeExist = true;\n            }\n          }\n\n          if (!checkColorExist) {\n            self.variantColors.push(variant.color_code);\n          }\n\n          if (!checkSizeExist) {\n            self.variantSizes.push(variant.size);\n          }\n        });\n        console.log(this.variantColors, this.variantSizes); // variantColors\n        // variantSizes\n      }, response => {}, () => {// console.log(\"The observable is now completed.\");\n      });\n      this.getProductTemplates(params['productId']).subscribe(val => {\n        this.templatesData = val;\n        this.templates = this.templatesData.result.variant_mapping[0].templates;\n        this.this.templates[0].selected = true;\n        this.variantId = this.templatesData.result.variant_mapping[0].variant_id;\n        var templateId = this.templatesData.result.variant_mapping[0].templates[0].template_id;\n        this.selectedColors.push('');\n        this.selectedSizes.push('');\n        console.log(this.templates);\n        console.log(this.templatesData);\n        let self = this;\n        this.templatesData.result.templates.forEach(function (template) {\n          if (template.template_id == templateId) {\n            self.template = template;\n            console.log(self.template);\n            self.templatePlacement(self.template.image_url, self.template.background_color);\n          }\n        });\n      }, response => {}, () => {// console.log(\"The observable is now completed.\");\n      }); // https://api.printful.com/products/362\n    });\n  }\n\n  getAsset(contractAddress, id) {\n    var data = this.http.get(this.apiUrl + '/asset/' + contractAddress + '/' + id);\n    return data;\n  }\n\n  templatePlacement(templateUrl, color) {\n    console.log(this.template);\n    this.getBase64FromUrl(templateUrl).then(b64Img => {\n      this.htmlEl = this.canvasEl.nativeElement;\n      this.templateImgScale = 500 / this.template.template_width;\n      this.htmlEl.width = this.templateImgScale * this.template.template_width;\n      this.htmlEl.height = this.templateImgScale * this.template.template_height;\n      this.htmlEl.style.background = color + \" url('\" + b64Img + \"') left top/\" + 500 + \"px auto no-repeat\";\n      this.context = this.htmlEl.getContext('2d');\n      this.drawWindows();\n    });\n  }\n\n  switchVariant(variantIndex, color, size) {\n    this.designImgWidth = 0;\n    this.designImgHeight = 0;\n\n    if (variantIndex != 'NULL') {\n      this.templates = this.templatesData.result.variant_mapping[variantIndex].templates;\n      this.this.templates[0].selected = true;\n      this.variantId = this.templatesData.result.variant_mapping[variantIndex].variant_id;\n      var templateId = this.templatesData.result.variant_mapping[variantIndex].templates[0].template_id;\n    }\n\n    let self = this;\n\n    if (color != 'NULL') {\n      this.selectedColors.push(color);\n      var latestColor = this.selectedColors.slice(-1);\n      this.templatesData.result.templates.forEach(function (template) {\n        if (template.background_color == latestColor) {\n          // templateId = template.template_id;\n          for (let vm = 0; vm < self.templatesData.result.variant_mapping.length; vm++) {\n            for (let t = 0; t < self.templatesData.result.variant_mapping[vm].templates.length; t++) {\n              if (self.templatesData.result.variant_mapping[vm].templates[t].template_id == template.template_id) {\n                self.templates = self.templatesData.result.variant_mapping[vm].templates;\n                self.variantId = self.templatesData.result.variant_mapping[vm].variant_id;\n                templateId = self.templatesData.result.variant_mapping[vm].templates[0].template_id; // console.log(self.templatesData.result.variant_mapping[vm].variant_id);\n                // break;\n              }\n            }\n          }\n        }\n      });\n    }\n\n    if (size != 'NULL') {\n      this.selectedSizes.push(); // var latestSize = this.selectedSizes.slice(-1);\n    }\n\n    this.templatesData.result.templates.forEach(function (template) {\n      if (template.template_id == templateId) {\n        self.template = template;\n        self.templatePlacement(self.template.image_url, self.template.background_color);\n      }\n    });\n  }\n\n  switchTemplate(templateId, itemIndex) {\n    // console.log(this.templatesEl.nativeElement);\n    this.designImgWidth = 0;\n    this.designImgHeight = 0;\n    this.placementX = 0;\n    this.placementY = 0;\n    this.ratioScale = 0;\n    let self = this;\n    this.templatesData.result.templates.forEach(function (template) {\n      if (template.template_id == templateId) {\n        self.template = template;\n        self.templatePlacement(self.template.image_url, self.template.background_color);\n      }\n    });\n\n    for (let t = 0; t < this.templates.length; t++) {\n      if (t == itemIndex) {\n        this.templates[t].selected = true;\n      } else {\n        this.templates[t].selected = false;\n      }\n    }\n  }\n\n  getProduct(id) {\n    return this.http.post('https://dev.smerch.io/printful.php', {\n      \"fetch\": \"product-details\",\n      \"product_id\": id,\n      \"store_id\": \"8410045\"\n    });\n  }\n\n  getProductTemplates(productId) {\n    return this.http.post('https://dev.smerch.io/printful.php', {\n      \"fetch\": \"product-templates\",\n      \"product_id\": productId,\n      \"store_id\": \"8410045\"\n    });\n  }\n\n  generateMockupPost(info) {\n    return this.http.post('http://localhost/smerch/printful.php', {\n      \"fetch\": \"generate-mockup\",\n      \"info\": info\n    });\n  }\n\n  mouseDown(e) {\n    if (this.resize) {\n      this.dragging = false;\n      this.resizeDrag = true;\n    } else {\n      this.dragging = true;\n      this.resizeDrag = false;\n    }\n\n    const rect = this.htmlEl.getBoundingClientRect();\n    var mx = Math.floor(e.clientX - rect.left);\n    var my = Math.floor(e.clientY - rect.top);\n    this.designSelect(mx, my);\n  }\n\n  mouseUp(e) {\n    this.dragging = false;\n    this.resizeDrag = false;\n  }\n\n  onMouseMove(e) {\n    var evt = e || event;\n    var deltaX = evt.clientX - this.lastX;\n    var deltaY = evt.clientY - this.lastY;\n    this.lastX = evt.clientX;\n    this.lastY = evt.clientY;\n\n    if (this.dragging) {\n      // console.log(\"Mouse move\");\n      this.placementX += deltaX;\n      this.placementY += deltaY;\n      this.drawWindows();\n    }\n\n    if (this.designSelected) {\n      const rect = this.htmlEl.getBoundingClientRect();\n      var mx = Math.floor(e.clientX - rect.left);\n      var my = Math.floor(e.clientY - rect.top);\n\n      if (!this.resizeDrag) {\n        this.resize = this.inDrawing(mx, my, [this.placementX + this.designImgWidth * this.designImgScale - 10, this.placementY + this.designImgHeight * this.designImgScale - 10, this.placementX + this.designImgWidth * this.designImgScale, this.placementY + this.designImgHeight * this.designImgScale]);\n      } // console.log(this.resize);\n\n\n      if (this.resize) {\n        this.htmlEl.style.cursor = \"nw-resize\";\n      } else {\n        this.htmlEl.style.cursor = \"default\";\n      }\n    }\n\n    if (this.resize == true && this.resizeDrag == true) {\n      // this.designImgHeight += deltaY;\n      this.designImgWidth += deltaX;\n      this.ratioScale = this.designImgWidth / this.designImgOriginalWidth;\n      this.designImgHeight = this.ratioScale * this.designImgOriginalHeight;\n      this.drawWindows();\n    }\n  }\n\n  drawWindows() {\n    this.context.clearRect(0, 0, 800, 700);\n    var img = new Image();\n    let self = this;\n    img.addEventListener(\"load\", function () {\n      if (self.resize) {\n        self.paintSelect();\n      } else {\n        if (self.designImgWidth == 0 && self.designImgHeight == 0) {\n          self.printAreaHeight = self.template.print_area_height * self.templateImgScale;\n          self.printAreaWidth = self.template.print_area_width * self.templateImgScale;\n          self.printAreaX = self.template.print_area_left * self.templateImgScale;\n          self.printAreaY = self.template.print_area_top * self.templateImgScale;\n\n          for (let t = 0; t < self.templates.length; t++) {\n            if (self.templates[t].template_id == self.template.template_id) {\n              if (self.templates[t].placement_x != undefined) {\n                self.placementX = self.templates[t].placement_x;\n                self.placementY = self.templates[t].placement_y;\n                self.ratioScale = self.templates[t].ratio_scale;\n              } else {\n                self.placementX = self.template.print_area_left * self.templateImgScale;\n                self.placementY = self.template.print_area_top * self.templateImgScale;\n                self.ratioScale = self.printAreaWidth / this.naturalWidth;\n                self.templates[t].placement_x = self.placementX;\n                self.templates[t].placement_y = self.placementY;\n                self.templates[t].ratio_scale = self.ratioScale;\n                self.templates[t].original_ratio_scale = self.ratioScale;\n                self.templates[t].template_img_scale = self.templateImgScale;\n                self.templates[t].variant_id = self.variantId;\n                self.templates[t].original_img_width = this.naturalWidth;\n                self.templates[t].original_img_height = this.naturalHeight;\n                self.templates[t].img_width = this.naturalWidth * self.ratioScale;\n                self.templates[t].img_height = this.naturalHeight * self.ratioScale;\n              }\n            }\n          }\n\n          self.designImgOriginalWidth = this.naturalWidth;\n          self.designImgOriginalHeight = this.naturalHeight;\n          self.designImgWidth = this.naturalWidth * self.ratioScale;\n          self.designImgHeight = this.naturalHeight * self.ratioScale;\n        } else {\n          console.log(\"the else we need\"); // designImgWidth\n          // designImgHeight\n        }\n      }\n\n      console.log(self.placementX, self.placementY);\n      console.log(self.placementX / self.templateImgScale, self.placementY / self.templateImgScale);\n\n      for (let t = 0; t < self.templates.length; t++) {\n        if (self.templates[t].template_id == self.template.template_id) {\n          self.templates[t].placement_x = self.placementX;\n          self.templates[t].placement_y = self.placementY;\n          self.templates[t].ratio_scale = self.ratioScale;\n          self.templates[t].template_img_scale = self.templateImgScale;\n          self.templates[t].variant_id = self.variantId;\n          self.templates[t].original_img_width = this.naturalWidth;\n          self.templates[t].original_img_height = this.naturalHeight;\n          self.templates[t].img_width = this.naturalWidth * self.ratioScale;\n          self.templates[t].img_height = this.naturalHeight * self.ratioScale;\n        }\n      } // console.log(self.designImgWidth, self.designImgHeight);\n\n\n      self.context.drawImage(img, self.placementX, self.placementY, self.designImgWidth * self.designImgScale, self.designImgHeight * self.designImgScale);\n      self.context.setLineDash([6]);\n      var invertedHighlight = \"#\" + self.invertHex(self.template.background_color.substring(1));\n      self.context.strokeStyle = invertedHighlight;\n      self.context.strokeRect(self.printAreaX, self.printAreaY, self.printAreaWidth, self.printAreaHeight);\n    });\n    img.src = this.designImage;\n  }\n\n  invertHex(hex) {\n    return (Number(`0x1${hex}`) ^ 0xFFFFFF).toString(16).substr(1).toUpperCase();\n  }\n\n  designSelect(x, y) {\n    // var checkPoint = inDrawing(x,y,[minX, minY, maxX, maxY]);\n    var checkPoint = this.inDrawing(x, y, [this.placementX, this.placementY, this.placementX + this.designImgWidth * this.designImgScale, this.placementY + this.designImgHeight * this.designImgScale]);\n\n    if (checkPoint) {\n      this.designSelected = true;\n      this.paintSelect();\n    } else {\n      this.designSelected = false;\n    }\n  }\n\n  paintSelect() {\n    this.context.setLineDash([6]);\n    var invertedHighlight = \"#\" + this.invertHex(this.template.background_color.substring(1));\n    this.context.strokeStyle = invertedHighlight;\n    this.context.strokeRect(this.placementX, this.placementY, this.designImgWidth * this.designImgScale, this.designImgHeight * this.designImgScale);\n    this.context.fillStyle = invertedHighlight;\n    this.context.fillRect(this.placementX + this.designImgWidth * this.designImgScale - 10, this.placementY + this.designImgHeight * this.designImgScale - 10, 10, 10);\n  }\n\n  inDrawing(x, y, rect) {\n    if (x >= rect['0'] && x <= rect['2'] && y >= rect['1'] && y <= rect['3']) {\n      return true;\n    } else {\n      return false;\n    }\n  }\n\n  generateMockup() {\n    /*    console.log(this.template);\r\n        console.log(this.ratioScale);\r\n        console.log(this.templates);*/\n    console.log(this.templatesData);\n    let self = this;\n    let variant_ids = [];\n    let files = [];\n    this.templatesData.result.templates.forEach(function (template) {\n      for (let t = 0; t < self.templates.length; t++) {\n        if (template.template_id == self.templates[t].template_id) {\n          console.log(self.templates[t]);\n          console.log(template);\n          var fixRatio = self.templates[t].img_width / (self.templates[t].original_img_width * self.templates[t].original_ratio_scale);\n          var fixWidth = template.template_width * fixRatio;\n          var fixHeight = template.template_height * fixRatio;\n          var top = self.templates[t].placement_y / self.templates[t].template_img_scale - template.print_area_top;\n          var left = self.templates[t].placement_x / self.templates[t].template_img_scale - template.print_area_left;\n\n          if (!isNaN(top)) {\n            variant_ids.push(self.templates[t].variant_id);\n            files.push({\n              \"placement\": self.templates[t].placement,\n              \"image_url\": self.designImage,\n              \"position\": {\n                \"area_width\": template.template_width,\n                \"area_height\": template.template_height,\n                \"width\": fixWidth,\n                \"height\": fixHeight,\n                \"top\": top,\n                \"left\": left\n              }\n            });\n          } // console.log(self.templates[t].placement_y / self.templates[t].template_img_scale, template.print_area_top, top);\n          // console.log(self.templates[t].placement_x / self.templates[t].template_img_scale, template.print_area_left, left);\n\n        }\n      }\n    });\n    var postData = {\n      \"store_id\": 8410045,\n      \"product_id\": self.productId,\n      \"variant_ids\": variant_ids,\n      \"format\": \"jpg\",\n      \"files\": files\n    };\n    self.generateMockupPost(postData).subscribe(val => {\n      self.mockupGeneratorResponse = val;\n      this.fetchPreviewMockup(self.mockupGeneratorResponse.result.task_key);\n    }, response => {}, () => {// console.log(\"The observable is now completed.\");\n    }); // :::::::::::::::::::::::::::::::::::::::::::::::::::\n  }\n\n  fetchPreviewMockup(taskId) {\n    const dialogRef = this.dialog.open(MockupDialog, {\n      width: \"100%\",\n      data: {\n        task_id: taskId\n      }\n    });\n    dialogRef.afterClosed().subscribe(result => {// this.getTemplates(this.screenId)\n    });\n  }\n\n}\n\nDesignComponent.ɵfac = function DesignComponent_Factory(t) {\n  return new (t || DesignComponent)(i0.ɵɵdirectiveInject(i0.Renderer2), i0.ɵɵdirectiveInject(i0.ElementRef), i0.ɵɵdirectiveInject(i1.ActivatedRoute), i0.ɵɵdirectiveInject(i2.HttpClient), i0.ɵɵdirectiveInject(i3.MatDialog));\n};\n\nDesignComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: DesignComponent,\n  selectors: [[\"app-design\"]],\n  viewQuery: function DesignComponent_Query(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵviewQuery(_c0, 5);\n      i0.ɵɵviewQuery(_c1, 5);\n    }\n\n    if (rf & 2) {\n      let _t;\n\n      i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.canvasEl = _t.first);\n      i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.templatesEl = _t.first);\n    }\n  },\n  decls: 27,\n  vars: 3,\n  consts: [[1, \"container\", 2, \"background-color\", \"#fff\", \"min-height\", \"500px\", \"padding\", \"20px\"], [1, \"row\"], [1, \"col-md-6\", \"col-sm-6\"], [\"action\", \"#\"], [\"value\", \"Bike\", 3, \"id\", \"style\", \"click\", 4, \"ngFor\", \"ngForOf\"], [\"class\", \"form-check\", \"style\", \"float: left; margin-right: 5px;\", 4, \"ngFor\", \"ngForOf\"], [1, \"col-md-12\", 2, \"margin-top\", \"20px\"], [1, \"btn\", \"btn-info\", 2, \"margin\", \"10px 10px 0 0\", 3, \"click\"], [1, \"col-12\", 2, \"margin-bottom\", \"20px\"], [\"id\", \"templates\", 1, \"nav\", \"nav-tabs\"], [\"class\", \"nav-item\", \"style\", \"cursor: pointer;\", 3, \"click\", 4, \"ngFor\", \"ngForOf\"], [2, \"background\", \"#f5f5f5\", \"border\", \"1px solid #ccc\", 3, \"mousedown\", \"mouseup\", \"mousemove\"], [\"canvasEl\", \"\"], [\"value\", \"Bike\", 3, \"id\", \"click\"], [1, \"form-check\", 2, \"float\", \"left\", \"margin-right\", \"5px\"], [\"type\", \"checkbox\", \"value\", \"\", 1, \"form-check-input\", 3, \"id\", \"name\", \"mouseup\"], [\"for\", \"flexCheckDefault\", 1, \"form-check-label\"], [1, \"nav-item\", 2, \"cursor\", \"pointer\", 3, \"click\"]],\n  template: function DesignComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1)(2, \"div\", 2)(3, \"div\", 1)(4, \"form\", 3)(5, \"p\")(6, \"strong\");\n      i0.ɵɵtext(7, \"Choose colors:\");\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(8, \"p\");\n      i0.ɵɵtext(9, \"Select all colors\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtemplate(10, DesignComponent_div_10_Template, 1, 4, \"div\", 4);\n      i0.ɵɵelementStart(11, \"p\");\n      i0.ɵɵtext(12, \"Select size(s):\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(13, \"p\");\n      i0.ɵɵtext(14, \"Select all sizes\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtemplate(15, DesignComponent_div_15_Template, 4, 3, \"div\", 5);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(16, \"div\", 1)(17, \"div\", 6)(18, \"button\", 7);\n      i0.ɵɵlistener(\"click\", function DesignComponent_Template_button_click_18_listener() {\n        return ctx.generateMockup();\n      });\n      i0.ɵɵtext(19, \"Generate preview\");\n      i0.ɵɵelementEnd()()()()();\n      i0.ɵɵelementStart(20, \"div\", 2)(21, \"div\", 1)(22, \"div\", 8)(23, \"ul\", 9);\n      i0.ɵɵtemplate(24, DesignComponent_li_24_Template, 3, 4, \"li\", 10);\n      i0.ɵɵelementEnd()()();\n      i0.ɵɵelementStart(25, \"canvas\", 11, 12);\n      i0.ɵɵlistener(\"mousedown\", function DesignComponent_Template_canvas_mousedown_25_listener($event) {\n        return ctx.mouseDown($event);\n      })(\"mouseup\", function DesignComponent_Template_canvas_mouseup_25_listener($event) {\n        return ctx.mouseUp($event);\n      })(\"mousemove\", function DesignComponent_Template_canvas_mousemove_25_listener($event) {\n        return ctx.onMouseMove($event);\n      });\n      i0.ɵɵelementEnd()()()();\n    }\n\n    if (rf & 2) {\n      i0.ɵɵadvance(10);\n      i0.ɵɵproperty(\"ngForOf\", ctx.variantColors);\n      i0.ɵɵadvance(5);\n      i0.ɵɵproperty(\"ngForOf\", ctx.variantSizes);\n      i0.ɵɵadvance(9);\n      i0.ɵɵproperty(\"ngForOf\", ctx.templates);\n    }\n  },\n  directives: [i4.ɵNgNoValidate, i4.NgControlStatusGroup, i4.NgForm, i5.NgForOf],\n  styles: [\".example-list[_ngcontent-%COMP%] {\\r\\n  width: 500px;\\r\\n  max-width: 100%;\\r\\n  border: solid 1px #ccc;\\r\\n  min-height: 40px;\\r\\n  display: block;\\r\\n  background: white;\\r\\n  border-radius: 4px;\\r\\n  overflow: hidden;\\r\\n}\\r\\n\\r\\n.example-box[_ngcontent-%COMP%] {\\r\\n  padding: 10px;\\r\\n  border-bottom: solid 1px #ccc;\\r\\n  color: rgba(0, 0, 0, 0.87);\\r\\n  display: flex;\\r\\n  flex-direction: row;\\r\\n  align-items: center;\\r\\n  justify-content: space-between;\\r\\n  box-sizing: border-box;\\r\\n  cursor: move;\\r\\n  background: white;\\r\\n  font-size: 14px;\\r\\n}\\r\\n\\r\\n.cdk-drag-preview[_ngcontent-%COMP%] {\\r\\n  box-sizing: border-box;\\r\\n  border-radius: 4px;\\r\\n  box-shadow: 0 5px 5px -3px rgba(0, 0, 0, 0.2),\\r\\n              0 8px 10px 1px rgba(0, 0, 0, 0.14),\\r\\n              0 3px 14px 2px rgba(0, 0, 0, 0.12);\\r\\n}\\r\\n\\r\\n.cdk-drag-placeholder[_ngcontent-%COMP%] {\\r\\n  opacity: 0;\\r\\n}\\r\\n\\r\\n.cdk-drag-animating[_ngcontent-%COMP%] {\\r\\n  transition: transform 250ms cubic-bezier(0, 0, 0.2, 1);\\r\\n}\\r\\n\\r\\n.example-box[_ngcontent-%COMP%]:last-child {\\r\\n  border: none;\\r\\n}\\r\\n\\r\\n.example-list.cdk-drop-list-dragging[_ngcontent-%COMP%]   .example-box[_ngcontent-%COMP%]:not(.cdk-drag-placeholder) {\\r\\n  transition: transform 250ms cubic-bezier(0, 0, 0.2, 1);\\r\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImRlc2lnbi5jb21wb25lbnQuY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0VBQ0UsWUFBWTtFQUNaLGVBQWU7RUFDZixzQkFBc0I7RUFDdEIsZ0JBQWdCO0VBQ2hCLGNBQWM7RUFDZCxpQkFBaUI7RUFDakIsa0JBQWtCO0VBQ2xCLGdCQUFnQjtBQUNsQjs7QUFFQTtFQUNFLGFBQWE7RUFDYiw2QkFBNkI7RUFDN0IsMEJBQTBCO0VBQzFCLGFBQWE7RUFDYixtQkFBbUI7RUFDbkIsbUJBQW1CO0VBQ25CLDhCQUE4QjtFQUM5QixzQkFBc0I7RUFDdEIsWUFBWTtFQUNaLGlCQUFpQjtFQUNqQixlQUFlO0FBQ2pCOztBQUVBO0VBQ0Usc0JBQXNCO0VBQ3RCLGtCQUFrQjtFQUNsQjs7Z0RBRThDO0FBQ2hEOztBQUVBO0VBQ0UsVUFBVTtBQUNaOztBQUVBO0VBQ0Usc0RBQXNEO0FBQ3hEOztBQUVBO0VBQ0UsWUFBWTtBQUNkOztBQUVBO0VBQ0Usc0RBQXNEO0FBQ3hEIiwiZmlsZSI6ImRlc2lnbi5jb21wb25lbnQuY3NzIiwic291cmNlc0NvbnRlbnQiOlsiLmV4YW1wbGUtbGlzdCB7XHJcbiAgd2lkdGg6IDUwMHB4O1xyXG4gIG1heC13aWR0aDogMTAwJTtcclxuICBib3JkZXI6IHNvbGlkIDFweCAjY2NjO1xyXG4gIG1pbi1oZWlnaHQ6IDQwcHg7XHJcbiAgZGlzcGxheTogYmxvY2s7XHJcbiAgYmFja2dyb3VuZDogd2hpdGU7XHJcbiAgYm9yZGVyLXJhZGl1czogNHB4O1xyXG4gIG92ZXJmbG93OiBoaWRkZW47XHJcbn1cclxuXHJcbi5leGFtcGxlLWJveCB7XHJcbiAgcGFkZGluZzogMTBweDtcclxuICBib3JkZXItYm90dG9tOiBzb2xpZCAxcHggI2NjYztcclxuICBjb2xvcjogcmdiYSgwLCAwLCAwLCAwLjg3KTtcclxuICBkaXNwbGF5OiBmbGV4O1xyXG4gIGZsZXgtZGlyZWN0aW9uOiByb3c7XHJcbiAgYWxpZ24taXRlbXM6IGNlbnRlcjtcclxuICBqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWJldHdlZW47XHJcbiAgYm94LXNpemluZzogYm9yZGVyLWJveDtcclxuICBjdXJzb3I6IG1vdmU7XHJcbiAgYmFja2dyb3VuZDogd2hpdGU7XHJcbiAgZm9udC1zaXplOiAxNHB4O1xyXG59XHJcblxyXG4uY2RrLWRyYWctcHJldmlldyB7XHJcbiAgYm94LXNpemluZzogYm9yZGVyLWJveDtcclxuICBib3JkZXItcmFkaXVzOiA0cHg7XHJcbiAgYm94LXNoYWRvdzogMCA1cHggNXB4IC0zcHggcmdiYSgwLCAwLCAwLCAwLjIpLFxyXG4gICAgICAgICAgICAgIDAgOHB4IDEwcHggMXB4IHJnYmEoMCwgMCwgMCwgMC4xNCksXHJcbiAgICAgICAgICAgICAgMCAzcHggMTRweCAycHggcmdiYSgwLCAwLCAwLCAwLjEyKTtcclxufVxyXG5cclxuLmNkay1kcmFnLXBsYWNlaG9sZGVyIHtcclxuICBvcGFjaXR5OiAwO1xyXG59XHJcblxyXG4uY2RrLWRyYWctYW5pbWF0aW5nIHtcclxuICB0cmFuc2l0aW9uOiB0cmFuc2Zvcm0gMjUwbXMgY3ViaWMtYmV6aWVyKDAsIDAsIDAuMiwgMSk7XHJcbn1cclxuXHJcbi5leGFtcGxlLWJveDpsYXN0LWNoaWxkIHtcclxuICBib3JkZXI6IG5vbmU7XHJcbn1cclxuXHJcbi5leGFtcGxlLWxpc3QuY2RrLWRyb3AtbGlzdC1kcmFnZ2luZyAuZXhhbXBsZS1ib3g6bm90KC5jZGstZHJhZy1wbGFjZWhvbGRlcikge1xyXG4gIHRyYW5zaXRpb246IHRyYW5zZm9ybSAyNTBtcyBjdWJpYy1iZXppZXIoMCwgMCwgMC4yLCAxKTtcclxufSJdfQ== */\"]\n});\nexport class MockupDialog {\n  constructor(http, // private dt: PresentationService,\n  dialogRef, data) {\n    this.http = http;\n    this.dialogRef = dialogRef;\n    this.data = data;\n  }\n\n  onNoClick() {\n    this.dialogRef.close();\n  }\n\n  ngOnInit() {\n    let self = this;\n    this.refreshIntervalId = setInterval(function () {\n      self.getMockupResults(self.data.task_id).subscribe(val => {\n        self.serverData = val;\n\n        if (self.serverData.result.status == \"completed\") {\n          self.clearMockupCheck();\n        }\n      }, response => {}, () => {// console.log(\"The observable is now completed.\");\n      });\n    }, 3000);\n  }\n\n  clearMockupCheck() {\n    clearInterval(this.refreshIntervalId);\n  }\n\n  getMockupResults(taskId) {\n    return this.http.post('http://localhost/smerch/printful.php', {\n      \"fetch\": \"check-mockup-task\",\n      \"info\": {\n        \"task_id\": taskId\n      }\n    });\n  }\n\n}\n\nMockupDialog.ɵfac = function MockupDialog_Factory(t) {\n  return new (t || MockupDialog)(i0.ɵɵdirectiveInject(i2.HttpClient), i0.ɵɵdirectiveInject(i3.MatDialogRef), i0.ɵɵdirectiveInject(MAT_DIALOG_DATA));\n};\n\nMockupDialog.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: MockupDialog,\n  selectors: [[\"mockup-dialog\"]],\n  decls: 14,\n  vars: 1,\n  consts: [[\"mat-dialog-title\", \"\"], [\"mat-dialog-content\", \"\"], [\"mat-dialog-actions\", \"\"], [\"mat-raised-button\", \"\", \"color\", \"primary\"], [1, \"btn\", \"btn-info\", 2, \"margin\", \"10px 10px 0 0\"], [1, \"row\"], [\"align\", \"center\", 1, \"col-md-8\"], [2, \"height\", \"550px\", \"overflow\", \"scroll\"], [\"style\", \"padding: 20px;\", 4, \"ngFor\", \"ngForOf\"], [2, \"padding\", \"20px\"], [1, \"img-fluid\", 3, \"src\"]],\n  template: function MockupDialog_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"h1\", 0);\n      i0.ɵɵtext(1, \"Generating mockup...\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(2, \"div\", 1);\n      i0.ɵɵelementStart(3, \"div\", 2);\n      i0.ɵɵelement(4, \"button\", 3)(5, \"button\", 3);\n      i0.ɵɵelementStart(6, \"button\", 4);\n      i0.ɵɵtext(7, \"Save design\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(8, \"button\", 4);\n      i0.ɵɵtext(9, \"Place print order\");\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(10, \"div\", 5)(11, \"div\", 6)(12, \"div\", 7);\n      i0.ɵɵtemplate(13, MockupDialog_div_13_Template, 2, 1, \"div\", 8);\n      i0.ɵɵelementEnd()()();\n    }\n\n    if (rf & 2) {\n      i0.ɵɵadvance(13);\n      i0.ɵɵproperty(\"ngForOf\", ctx.serverData == null ? null : ctx.serverData.result.mockups);\n    }\n  },\n  directives: [i3.MatDialogTitle, i3.MatDialogContent, i3.MatDialogActions, i5.NgForOf],\n  encapsulation: 2\n});","map":{"version":3,"sources":["C:/node/smerch-front/src/app/mockup-design/design/design.component.ts"],"names":["SystConfig","HttpHeaders","MAT_DIALOG_DATA","i0","i1","i2","i3","i4","i5","_c0","_c1","DesignComponent_div_10_Template","rf","ctx","_r7","ɵɵgetCurrentView","ɵɵelementStart","ɵɵlistener","DesignComponent_div_10_Template_div_click_0_listener","restoredCtx","ɵɵrestoreView","color_r4","$implicit","ctx_r6","ɵɵnextContext","switchVariant","ɵɵelementEnd","i_r5","index","ɵɵstyleMapInterpolate1","ɵɵpropertyInterpolate","DesignComponent_div_15_Template","_r11","DesignComponent_div_15_Template_input_mouseup_1_listener","size_r8","ctx_r10","ɵɵtext","s_r9","ɵɵadvance","ɵɵtextInterpolate1","DesignComponent_li_24_Template","_r15","DesignComponent_li_24_Template_li_click_0_listener","template_r12","d_r13","ctx_r14","switchTemplate","template_id","ɵɵclassMapInterpolate1","ɵɵtextInterpolate","placement","MockupDialog_div_13_Template","ɵɵelement","mockup_r1","mockup_url","ɵɵsanitizeUrl","DesignComponent","constructor","renderer","el","route","http","dialog","dragging","designSelected","resize","resizeDrag","lastX","lastY","marginLeft","marginTop","canvasoffsetLeft","canvasoffsetTop","placementX","placementY","designImgOriginalWidth","designImgOriginalHeight","designImgWidth","designImgHeight","designImgScale","variantColors","variantSizes","selectedColors","selectedSizes","ratioScale","apiUrl","apiPrintfulUrl","canvasEl","getBase64FromUrl","url","data","fetch","blob","Promise","resolve","reader","FileReader","readAsDataURL","onloadend","base64data","result","genHeders","token_key","generatedHeader","headers","ngOnInit","ngAfterViewInit","params","subscribe","productId","getAsset","val","asset","designImage","image_url","response","getProduct","serverData","console","log","variants","self","forEach","variant","checkColorExist","checkSizeExist","c","length","color_code","s","size","push","getProductTemplates","templatesData","templates","variant_mapping","this","selected","variantId","variant_id","templateId","template","templatePlacement","background_color","contractAddress","id","get","templateUrl","color","then","b64Img","htmlEl","nativeElement","templateImgScale","template_width","width","height","template_height","style","background","context","getContext","drawWindows","variantIndex","latestColor","slice","vm","t","itemIndex","post","generateMockupPost","info","mouseDown","e","rect","getBoundingClientRect","mx","Math","floor","clientX","left","my","clientY","top","designSelect","mouseUp","onMouseMove","evt","event","deltaX","deltaY","inDrawing","cursor","clearRect","img","Image","addEventListener","paintSelect","printAreaHeight","print_area_height","printAreaWidth","print_area_width","printAreaX","print_area_left","printAreaY","print_area_top","placement_x","undefined","placement_y","ratio_scale","naturalWidth","original_ratio_scale","template_img_scale","original_img_width","original_img_height","naturalHeight","img_width","img_height","drawImage","setLineDash","invertedHighlight","invertHex","substring","strokeStyle","strokeRect","src","hex","Number","toString","substr","toUpperCase","x","y","checkPoint","fillStyle","fillRect","generateMockup","variant_ids","files","fixRatio","fixWidth","fixHeight","isNaN","postData","mockupGeneratorResponse","fetchPreviewMockup","task_key","taskId","dialogRef","open","MockupDialog","task_id","afterClosed","ɵfac","DesignComponent_Factory","ɵɵdirectiveInject","Renderer2","ElementRef","ActivatedRoute","HttpClient","MatDialog","ɵcmp","ɵɵdefineComponent","type","selectors","viewQuery","DesignComponent_Query","ɵɵviewQuery","_t","ɵɵqueryRefresh","ɵɵloadQuery","first","templatesEl","decls","vars","consts","DesignComponent_Template","ɵɵtemplate","DesignComponent_Template_button_click_18_listener","DesignComponent_Template_canvas_mousedown_25_listener","$event","DesignComponent_Template_canvas_mouseup_25_listener","DesignComponent_Template_canvas_mousemove_25_listener","ɵɵproperty","directives","ɵNgNoValidate","NgControlStatusGroup","NgForm","NgForOf","styles","onNoClick","close","refreshIntervalId","setInterval","getMockupResults","status","clearMockupCheck","clearInterval","MockupDialog_Factory","MatDialogRef","MockupDialog_Template","mockups","MatDialogTitle","MatDialogContent","MatDialogActions","encapsulation"],"mappings":"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","sourcesContent":["import { SystConfig } from '../../config/syst';\r\nimport { HttpHeaders } from '@angular/common/http';\r\nimport { MAT_DIALOG_DATA } from '@angular/material/dialog';\r\nimport * as i0 from \"@angular/core\";\r\nimport * as i1 from \"@angular/router\";\r\nimport * as i2 from \"@angular/common/http\";\r\nimport * as i3 from \"@angular/material/dialog\";\r\nimport * as i4 from \"@angular/forms\";\r\nimport * as i5 from \"@angular/common\";\r\nconst _c0 = [\"canvasEl\"];\r\nconst _c1 = [\"templates\"];\r\nfunction DesignComponent_div_10_Template(rf, ctx) { if (rf & 1) {\r\n    const _r7 = i0.ɵɵgetCurrentView();\r\n    i0.ɵɵelementStart(0, \"div\", 13);\r\n    i0.ɵɵlistener(\"click\", function DesignComponent_div_10_Template_div_click_0_listener() { const restoredCtx = i0.ɵɵrestoreView(_r7); const color_r4 = restoredCtx.$implicit; const ctx_r6 = i0.ɵɵnextContext(); return ctx_r6.switchVariant(\"NULL\", color_r4, \"NULL\"); });\r\n    i0.ɵɵelementEnd();\r\n} if (rf & 2) {\r\n    const color_r4 = ctx.$implicit;\r\n    const i_r5 = ctx.index;\r\n    i0.ɵɵstyleMapInterpolate1(\"background-color:\", color_r4, \"; height: 20px; width: 30px; margin: 2px; float: left; border-radius: 3px; cursor: pointer;\");\r\n    i0.ɵɵpropertyInterpolate(\"id\", i_r5);\r\n} }\r\nfunction DesignComponent_div_15_Template(rf, ctx) { if (rf & 1) {\r\n    const _r11 = i0.ɵɵgetCurrentView();\r\n    i0.ɵɵelementStart(0, \"div\", 14)(1, \"input\", 15);\r\n    i0.ɵɵlistener(\"mouseup\", function DesignComponent_div_15_Template_input_mouseup_1_listener() { const restoredCtx = i0.ɵɵrestoreView(_r11); const size_r8 = restoredCtx.$implicit; const ctx_r10 = i0.ɵɵnextContext(); return ctx_r10.switchVariant(\"NULL\", \"NULL\", size_r8); });\r\n    i0.ɵɵelementEnd();\r\n    i0.ɵɵelementStart(2, \"label\", 16);\r\n    i0.ɵɵtext(3);\r\n    i0.ɵɵelementEnd()();\r\n} if (rf & 2) {\r\n    const size_r8 = ctx.$implicit;\r\n    const s_r9 = ctx.index;\r\n    i0.ɵɵadvance(1);\r\n    i0.ɵɵpropertyInterpolate(\"id\", s_r9);\r\n    i0.ɵɵpropertyInterpolate(\"name\", s_r9);\r\n    i0.ɵɵadvance(2);\r\n    i0.ɵɵtextInterpolate1(\" \", size_r8, \" \");\r\n} }\r\nfunction DesignComponent_li_24_Template(rf, ctx) { if (rf & 1) {\r\n    const _r15 = i0.ɵɵgetCurrentView();\r\n    i0.ɵɵelementStart(0, \"li\", 17);\r\n    i0.ɵɵlistener(\"click\", function DesignComponent_li_24_Template_li_click_0_listener() { const restoredCtx = i0.ɵɵrestoreView(_r15); const template_r12 = restoredCtx.$implicit; const d_r13 = restoredCtx.index; const ctx_r14 = i0.ɵɵnextContext(); return ctx_r14.switchTemplate(template_r12.template_id, d_r13); });\r\n    i0.ɵɵelementStart(1, \"span\");\r\n    i0.ɵɵtext(2);\r\n    i0.ɵɵelementEnd()();\r\n} if (rf & 2) {\r\n    const template_r12 = ctx.$implicit;\r\n    const d_r13 = ctx.index;\r\n    i0.ɵɵadvance(1);\r\n    i0.ɵɵclassMapInterpolate1(\"nav-link \", d_r13 == 0 ? \"active\" : \"\", \"\");\r\n    i0.ɵɵadvance(1);\r\n    i0.ɵɵtextInterpolate(template_r12.placement);\r\n} }\r\nfunction MockupDialog_div_13_Template(rf, ctx) { if (rf & 1) {\r\n    i0.ɵɵelementStart(0, \"div\", 9);\r\n    i0.ɵɵelement(1, \"img\", 10);\r\n    i0.ɵɵelementEnd();\r\n} if (rf & 2) {\r\n    const mockup_r1 = ctx.$implicit;\r\n    i0.ɵɵadvance(1);\r\n    i0.ɵɵpropertyInterpolate(\"src\", mockup_r1.mockup_url, i0.ɵɵsanitizeUrl);\r\n} }\r\nexport class DesignComponent {\r\n    constructor(renderer, el, route, http, dialog) {\r\n        this.renderer = renderer;\r\n        this.el = el;\r\n        this.route = route;\r\n        this.http = http;\r\n        this.dialog = dialog;\r\n        this.dragging = false;\r\n        this.designSelected = false;\r\n        this.resize = false;\r\n        this.resizeDrag = false;\r\n        this.lastX = 0;\r\n        this.lastY = 0;\r\n        this.marginLeft = 0;\r\n        this.marginTop = 0;\r\n        this.canvasoffsetLeft = 0;\r\n        this.canvasoffsetTop = 0;\r\n        this.placementX = 0;\r\n        this.placementY = 0;\r\n        this.designImgOriginalWidth = 0;\r\n        this.designImgOriginalHeight = 0;\r\n        this.designImgWidth = 0;\r\n        this.designImgHeight = 0;\r\n        this.designImgScale = 1;\r\n        this.variantColors = [];\r\n        this.variantSizes = [];\r\n        this.selectedColors = [];\r\n        this.selectedSizes = [];\r\n        this.ratioScale = 0;\r\n        this.apiUrl = SystConfig.apiUrl;\r\n        this.apiPrintfulUrl = SystConfig.apiPrintfulUrl;\r\n        this.canvasEl = {};\r\n        this.getBase64FromUrl = async (url) => {\r\n            const data = await fetch(url);\r\n            const blob = await data.blob();\r\n            return new Promise((resolve) => {\r\n                const reader = new FileReader();\r\n                reader.readAsDataURL(blob);\r\n                reader.onloadend = () => {\r\n                    const base64data = reader.result;\r\n                    resolve(base64data);\r\n                };\r\n            });\r\n        };\r\n    }\r\n    genHeders(token_key) {\r\n        this.generatedHeader = {\r\n            headers: new HttpHeaders({\r\n                'Content-Type': 'application/json',\r\n                'Access-Control-Allow-Origin': '*',\r\n                'Authorization': token_key,\r\n            })\r\n        };\r\n        return this.generatedHeader;\r\n    }\r\n    ;\r\n    ngOnInit() {\r\n    }\r\n    ngAfterViewInit() {\r\n        // console.log(this.template);\r\n        this.route.params.subscribe(params => {\r\n            this.productId = params['productId'];\r\n            this.getAsset(params['address'], params['token']).subscribe((val) => {\r\n                this.asset = val;\r\n                this.designImage = this.asset.image_url;\r\n                // console.log(this.asset);\r\n                // this.assetsView = false;\r\n                // this.assetView = true;\r\n            }, response => {\r\n            }, () => {\r\n                // console.log(\"The observable is now completed.\");\r\n            });\r\n            this.getProduct(params['productId']).subscribe((val) => {\r\n                this.serverData = val;\r\n                // console.log(this.serverData.result.product);\r\n                console.log(this.serverData.result.variants);\r\n                let self = this;\r\n                this.serverData.result.variants.forEach(function (variant) {\r\n                    var checkColorExist = false;\r\n                    var checkSizeExist = false;\r\n                    for (let c = 0; c < self.variantColors.length; c++) {\r\n                        if (self.variantColors[c] == variant.color_code) {\r\n                            checkColorExist = true;\r\n                        }\r\n                    }\r\n                    for (let s = 0; s < self.variantSizes.length; s++) {\r\n                        if (self.variantSizes[s] == variant.size) {\r\n                            checkSizeExist = true;\r\n                        }\r\n                    }\r\n                    if (!checkColorExist) {\r\n                        self.variantColors.push(variant.color_code);\r\n                    }\r\n                    if (!checkSizeExist) {\r\n                        self.variantSizes.push(variant.size);\r\n                    }\r\n                });\r\n                console.log(this.variantColors, this.variantSizes);\r\n                // variantColors\r\n                // variantSizes\r\n            }, response => {\r\n            }, () => {\r\n                // console.log(\"The observable is now completed.\");\r\n            });\r\n            this.getProductTemplates(params['productId']).subscribe((val) => {\r\n                this.templatesData = val;\r\n                this.templates = this.templatesData.result.variant_mapping[0].templates;\r\n                this.this.templates[0].selected = true;\r\n                this.variantId = this.templatesData.result.variant_mapping[0].variant_id;\r\n                var templateId = this.templatesData.result.variant_mapping[0].templates[0].template_id;\r\n                this.selectedColors.push('');\r\n                this.selectedSizes.push('');\r\n                console.log(this.templates);\r\n                console.log(this.templatesData);\r\n                let self = this;\r\n                this.templatesData.result.templates.forEach(function (template) {\r\n                    if (template.template_id == templateId) {\r\n                        self.template = template;\r\n                        console.log(self.template);\r\n                        self.templatePlacement(self.template.image_url, self.template.background_color);\r\n                    }\r\n                });\r\n            }, response => {\r\n            }, () => {\r\n                // console.log(\"The observable is now completed.\");\r\n            });\r\n            // https://api.printful.com/products/362\r\n        });\r\n    }\r\n    getAsset(contractAddress, id) {\r\n        var data = this.http.get(this.apiUrl + '/asset/' + contractAddress + '/' + id);\r\n        return data;\r\n    }\r\n    templatePlacement(templateUrl, color) {\r\n        console.log(this.template);\r\n        this.getBase64FromUrl(templateUrl).then((b64Img) => {\r\n            this.htmlEl = this.canvasEl.nativeElement;\r\n            this.templateImgScale = 500 / this.template.template_width;\r\n            this.htmlEl.width = this.templateImgScale * this.template.template_width;\r\n            this.htmlEl.height = this.templateImgScale * this.template.template_height;\r\n            this.htmlEl.style.background = color + \" url('\" + b64Img + \"') left top/\" + 500 + \"px auto no-repeat\";\r\n            this.context = this.htmlEl.getContext('2d');\r\n            this.drawWindows();\r\n        });\r\n    }\r\n    switchVariant(variantIndex, color, size) {\r\n        this.designImgWidth = 0;\r\n        this.designImgHeight = 0;\r\n        if (variantIndex != 'NULL') {\r\n            this.templates = this.templatesData.result.variant_mapping[variantIndex].templates;\r\n            this.this.templates[0].selected = true;\r\n            this.variantId = this.templatesData.result.variant_mapping[variantIndex].variant_id;\r\n            var templateId = this.templatesData.result.variant_mapping[variantIndex].templates[0].template_id;\r\n        }\r\n        let self = this;\r\n        if (color != 'NULL') {\r\n            this.selectedColors.push(color);\r\n            var latestColor = this.selectedColors.slice(-1);\r\n            this.templatesData.result.templates.forEach(function (template) {\r\n                if (template.background_color == latestColor) {\r\n                    // templateId = template.template_id;\r\n                    for (let vm = 0; vm < self.templatesData.result.variant_mapping.length; vm++) {\r\n                        for (let t = 0; t < self.templatesData.result.variant_mapping[vm].templates.length; t++) {\r\n                            if (self.templatesData.result.variant_mapping[vm].templates[t].template_id == template.template_id) {\r\n                                self.templates = self.templatesData.result.variant_mapping[vm].templates;\r\n                                self.variantId = self.templatesData.result.variant_mapping[vm].variant_id;\r\n                                templateId = self.templatesData.result.variant_mapping[vm].templates[0].template_id;\r\n                                // console.log(self.templatesData.result.variant_mapping[vm].variant_id);\r\n                                // break;\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n            });\r\n        }\r\n        if (size != 'NULL') {\r\n            this.selectedSizes.push();\r\n            // var latestSize = this.selectedSizes.slice(-1);\r\n        }\r\n        this.templatesData.result.templates.forEach(function (template) {\r\n            if (template.template_id == templateId) {\r\n                self.template = template;\r\n                self.templatePlacement(self.template.image_url, self.template.background_color);\r\n            }\r\n        });\r\n    }\r\n    switchTemplate(templateId, itemIndex) {\r\n        // console.log(this.templatesEl.nativeElement);\r\n        this.designImgWidth = 0;\r\n        this.designImgHeight = 0;\r\n        this.placementX = 0;\r\n        this.placementY = 0;\r\n        this.ratioScale = 0;\r\n        let self = this;\r\n        this.templatesData.result.templates.forEach(function (template) {\r\n            if (template.template_id == templateId) {\r\n                self.template = template;\r\n                self.templatePlacement(self.template.image_url, self.template.background_color);\r\n            }\r\n        });\r\n        for (let t = 0; t < this.templates.length; t++) {\r\n            if (t == itemIndex) {\r\n                this.templates[t].selected = true;\r\n            }\r\n            else {\r\n                this.templates[t].selected = false;\r\n            }\r\n        }\r\n    }\r\n    getProduct(id) {\r\n        return this.http.post('https://dev.smerch.io/printful.php', {\r\n            \"fetch\": \"product-details\",\r\n            \"product_id\": id,\r\n            \"store_id\": \"8410045\"\r\n        });\r\n    }\r\n    getProductTemplates(productId) {\r\n        return this.http.post('https://dev.smerch.io/printful.php', {\r\n            \"fetch\": \"product-templates\",\r\n            \"product_id\": productId,\r\n            \"store_id\": \"8410045\"\r\n        });\r\n    }\r\n    generateMockupPost(info) {\r\n        return this.http.post('http://localhost/smerch/printful.php', {\r\n            \"fetch\": \"generate-mockup\",\r\n            \"info\": info\r\n        });\r\n    }\r\n    mouseDown(e) {\r\n        if (this.resize) {\r\n            this.dragging = false;\r\n            this.resizeDrag = true;\r\n        }\r\n        else {\r\n            this.dragging = true;\r\n            this.resizeDrag = false;\r\n        }\r\n        const rect = this.htmlEl.getBoundingClientRect();\r\n        var mx = Math.floor(e.clientX - rect.left);\r\n        var my = Math.floor(e.clientY - rect.top);\r\n        this.designSelect(mx, my);\r\n    }\r\n    mouseUp(e) {\r\n        this.dragging = false;\r\n        this.resizeDrag = false;\r\n    }\r\n    onMouseMove(e) {\r\n        var evt = e || event;\r\n        var deltaX = evt.clientX - this.lastX;\r\n        var deltaY = evt.clientY - this.lastY;\r\n        this.lastX = evt.clientX;\r\n        this.lastY = evt.clientY;\r\n        if (this.dragging) {\r\n            // console.log(\"Mouse move\");\r\n            this.placementX += deltaX;\r\n            this.placementY += deltaY;\r\n            this.drawWindows();\r\n        }\r\n        if (this.designSelected) {\r\n            const rect = this.htmlEl.getBoundingClientRect();\r\n            var mx = Math.floor(e.clientX - rect.left);\r\n            var my = Math.floor(e.clientY - rect.top);\r\n            if (!this.resizeDrag) {\r\n                this.resize = this.inDrawing(mx, my, [this.placementX + (this.designImgWidth * this.designImgScale) - 10, this.placementY + (this.designImgHeight * this.designImgScale) - 10, this.placementX + (this.designImgWidth * this.designImgScale), this.placementY + (this.designImgHeight * this.designImgScale)]);\r\n            }\r\n            // console.log(this.resize);\r\n            if (this.resize) {\r\n                this.htmlEl.style.cursor = \"nw-resize\";\r\n            }\r\n            else {\r\n                this.htmlEl.style.cursor = \"default\";\r\n            }\r\n        }\r\n        if (this.resize == true && this.resizeDrag == true) {\r\n            // this.designImgHeight += deltaY;\r\n            this.designImgWidth += deltaX;\r\n            this.ratioScale = this.designImgWidth / this.designImgOriginalWidth;\r\n            this.designImgHeight = this.ratioScale * this.designImgOriginalHeight;\r\n            this.drawWindows();\r\n        }\r\n    }\r\n    drawWindows() {\r\n        this.context.clearRect(0, 0, 800, 700);\r\n        var img = new Image();\r\n        let self = this;\r\n        img.addEventListener(\"load\", function () {\r\n            if (self.resize) {\r\n                self.paintSelect();\r\n            }\r\n            else {\r\n                if (self.designImgWidth == 0 && self.designImgHeight == 0) {\r\n                    self.printAreaHeight = self.template.print_area_height * self.templateImgScale;\r\n                    self.printAreaWidth = self.template.print_area_width * self.templateImgScale;\r\n                    self.printAreaX = self.template.print_area_left * self.templateImgScale;\r\n                    self.printAreaY = self.template.print_area_top * self.templateImgScale;\r\n                    for (let t = 0; t < self.templates.length; t++) {\r\n                        if (self.templates[t].template_id == self.template.template_id) {\r\n                            if (self.templates[t].placement_x != undefined) {\r\n                                self.placementX = self.templates[t].placement_x;\r\n                                self.placementY = self.templates[t].placement_y;\r\n                                self.ratioScale = self.templates[t].ratio_scale;\r\n                            }\r\n                            else {\r\n                                self.placementX = self.template.print_area_left * self.templateImgScale;\r\n                                self.placementY = self.template.print_area_top * self.templateImgScale;\r\n                                self.ratioScale = (self.printAreaWidth / this.naturalWidth);\r\n                                self.templates[t].placement_x = self.placementX;\r\n                                self.templates[t].placement_y = self.placementY;\r\n                                self.templates[t].ratio_scale = self.ratioScale;\r\n                                self.templates[t].original_ratio_scale = self.ratioScale;\r\n                                self.templates[t].template_img_scale = self.templateImgScale;\r\n                                self.templates[t].variant_id = self.variantId;\r\n                                self.templates[t].original_img_width = this.naturalWidth;\r\n                                self.templates[t].original_img_height = this.naturalHeight;\r\n                                self.templates[t].img_width = this.naturalWidth * self.ratioScale;\r\n                                self.templates[t].img_height = this.naturalHeight * self.ratioScale;\r\n                            }\r\n                        }\r\n                    }\r\n                    self.designImgOriginalWidth = this.naturalWidth;\r\n                    self.designImgOriginalHeight = this.naturalHeight;\r\n                    self.designImgWidth = this.naturalWidth * self.ratioScale;\r\n                    self.designImgHeight = this.naturalHeight * self.ratioScale;\r\n                }\r\n                else {\r\n                    console.log(\"the else we need\");\r\n                    // designImgWidth\r\n                    // designImgHeight\r\n                }\r\n            }\r\n            console.log(self.placementX, self.placementY);\r\n            console.log(self.placementX / self.templateImgScale, self.placementY / self.templateImgScale);\r\n            for (let t = 0; t < self.templates.length; t++) {\r\n                if (self.templates[t].template_id == self.template.template_id) {\r\n                    self.templates[t].placement_x = self.placementX;\r\n                    self.templates[t].placement_y = self.placementY;\r\n                    self.templates[t].ratio_scale = self.ratioScale;\r\n                    self.templates[t].template_img_scale = self.templateImgScale;\r\n                    self.templates[t].variant_id = self.variantId;\r\n                    self.templates[t].original_img_width = this.naturalWidth;\r\n                    self.templates[t].original_img_height = this.naturalHeight;\r\n                    self.templates[t].img_width = this.naturalWidth * self.ratioScale;\r\n                    self.templates[t].img_height = this.naturalHeight * self.ratioScale;\r\n                }\r\n            }\r\n            // console.log(self.designImgWidth, self.designImgHeight);\r\n            self.context.drawImage(img, self.placementX, self.placementY, self.designImgWidth * self.designImgScale, self.designImgHeight * self.designImgScale);\r\n            self.context.setLineDash([6]);\r\n            var invertedHighlight = \"#\" + self.invertHex(self.template.background_color.substring(1));\r\n            self.context.strokeStyle = invertedHighlight;\r\n            self.context.strokeRect(self.printAreaX, self.printAreaY, self.printAreaWidth, self.printAreaHeight);\r\n        });\r\n        img.src = this.designImage;\r\n    }\r\n    invertHex(hex) {\r\n        return (Number(`0x1${hex}`) ^ 0xFFFFFF).toString(16).substr(1).toUpperCase();\r\n    }\r\n    designSelect(x, y) {\r\n        // var checkPoint = inDrawing(x,y,[minX, minY, maxX, maxY]);\r\n        var checkPoint = this.inDrawing(x, y, [this.placementX, this.placementY, this.placementX + (this.designImgWidth * this.designImgScale), this.placementY + (this.designImgHeight * this.designImgScale)]);\r\n        if (checkPoint) {\r\n            this.designSelected = true;\r\n            this.paintSelect();\r\n        }\r\n        else {\r\n            this.designSelected = false;\r\n        }\r\n    }\r\n    paintSelect() {\r\n        this.context.setLineDash([6]);\r\n        var invertedHighlight = \"#\" + this.invertHex(this.template.background_color.substring(1));\r\n        this.context.strokeStyle = invertedHighlight;\r\n        this.context.strokeRect(this.placementX, this.placementY, (this.designImgWidth * this.designImgScale), (this.designImgHeight * this.designImgScale));\r\n        this.context.fillStyle = invertedHighlight;\r\n        this.context.fillRect(this.placementX + (this.designImgWidth * this.designImgScale) - 10, this.placementY + (this.designImgHeight * this.designImgScale) - 10, 10, 10);\r\n    }\r\n    inDrawing(x, y, rect) {\r\n        if (x >= rect['0'] && x <= rect['2'] && y >= rect['1'] && y <= rect['3']) {\r\n            return true;\r\n        }\r\n        else {\r\n            return false;\r\n        }\r\n    }\r\n    generateMockup() {\r\n        /*    console.log(this.template);\r\n            console.log(this.ratioScale);\r\n            console.log(this.templates);*/\r\n        console.log(this.templatesData);\r\n        let self = this;\r\n        let variant_ids = [];\r\n        let files = [];\r\n        this.templatesData.result.templates.forEach(function (template) {\r\n            for (let t = 0; t < self.templates.length; t++) {\r\n                if (template.template_id == self.templates[t].template_id) {\r\n                    console.log(self.templates[t]);\r\n                    console.log(template);\r\n                    var fixRatio = self.templates[t].img_width / (self.templates[t].original_img_width * self.templates[t].original_ratio_scale);\r\n                    var fixWidth = template.template_width * fixRatio;\r\n                    var fixHeight = template.template_height * fixRatio;\r\n                    var top = (self.templates[t].placement_y / self.templates[t].template_img_scale) - template.print_area_top;\r\n                    var left = (self.templates[t].placement_x / self.templates[t].template_img_scale) - template.print_area_left;\r\n                    if (!isNaN(top)) {\r\n                        variant_ids.push(self.templates[t].variant_id);\r\n                        files.push({\r\n                            \"placement\": self.templates[t].placement,\r\n                            \"image_url\": self.designImage,\r\n                            \"position\": {\r\n                                \"area_width\": template.template_width,\r\n                                \"area_height\": template.template_height,\r\n                                \"width\": fixWidth,\r\n                                \"height\": fixHeight,\r\n                                \"top\": top,\r\n                                \"left\": left\r\n                            }\r\n                        });\r\n                    }\r\n                    // console.log(self.templates[t].placement_y / self.templates[t].template_img_scale, template.print_area_top, top);\r\n                    // console.log(self.templates[t].placement_x / self.templates[t].template_img_scale, template.print_area_left, left);\r\n                }\r\n            }\r\n        });\r\n        var postData = {\r\n            \"store_id\": 8410045,\r\n            \"product_id\": self.productId,\r\n            \"variant_ids\": variant_ids,\r\n            \"format\": \"jpg\",\r\n            \"files\": files\r\n        };\r\n        self.generateMockupPost(postData).subscribe((val) => {\r\n            self.mockupGeneratorResponse = val;\r\n            this.fetchPreviewMockup(self.mockupGeneratorResponse.result.task_key);\r\n        }, response => {\r\n        }, () => {\r\n            // console.log(\"The observable is now completed.\");\r\n        });\r\n        // :::::::::::::::::::::::::::::::::::::::::::::::::::\r\n    }\r\n    fetchPreviewMockup(taskId) {\r\n        const dialogRef = this.dialog.open(MockupDialog, {\r\n            width: \"100%\",\r\n            data: { task_id: taskId }\r\n        });\r\n        dialogRef.afterClosed().subscribe(result => {\r\n            // this.getTemplates(this.screenId)\r\n        });\r\n    }\r\n}\r\nDesignComponent.ɵfac = function DesignComponent_Factory(t) { return new (t || DesignComponent)(i0.ɵɵdirectiveInject(i0.Renderer2), i0.ɵɵdirectiveInject(i0.ElementRef), i0.ɵɵdirectiveInject(i1.ActivatedRoute), i0.ɵɵdirectiveInject(i2.HttpClient), i0.ɵɵdirectiveInject(i3.MatDialog)); };\r\nDesignComponent.ɵcmp = /*@__PURE__*/ i0.ɵɵdefineComponent({ type: DesignComponent, selectors: [[\"app-design\"]], viewQuery: function DesignComponent_Query(rf, ctx) { if (rf & 1) {\r\n        i0.ɵɵviewQuery(_c0, 5);\r\n        i0.ɵɵviewQuery(_c1, 5);\r\n    } if (rf & 2) {\r\n        let _t;\r\n        i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.canvasEl = _t.first);\r\n        i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.templatesEl = _t.first);\r\n    } }, decls: 27, vars: 3, consts: [[1, \"container\", 2, \"background-color\", \"#fff\", \"min-height\", \"500px\", \"padding\", \"20px\"], [1, \"row\"], [1, \"col-md-6\", \"col-sm-6\"], [\"action\", \"#\"], [\"value\", \"Bike\", 3, \"id\", \"style\", \"click\", 4, \"ngFor\", \"ngForOf\"], [\"class\", \"form-check\", \"style\", \"float: left; margin-right: 5px;\", 4, \"ngFor\", \"ngForOf\"], [1, \"col-md-12\", 2, \"margin-top\", \"20px\"], [1, \"btn\", \"btn-info\", 2, \"margin\", \"10px 10px 0 0\", 3, \"click\"], [1, \"col-12\", 2, \"margin-bottom\", \"20px\"], [\"id\", \"templates\", 1, \"nav\", \"nav-tabs\"], [\"class\", \"nav-item\", \"style\", \"cursor: pointer;\", 3, \"click\", 4, \"ngFor\", \"ngForOf\"], [2, \"background\", \"#f5f5f5\", \"border\", \"1px solid #ccc\", 3, \"mousedown\", \"mouseup\", \"mousemove\"], [\"canvasEl\", \"\"], [\"value\", \"Bike\", 3, \"id\", \"click\"], [1, \"form-check\", 2, \"float\", \"left\", \"margin-right\", \"5px\"], [\"type\", \"checkbox\", \"value\", \"\", 1, \"form-check-input\", 3, \"id\", \"name\", \"mouseup\"], [\"for\", \"flexCheckDefault\", 1, \"form-check-label\"], [1, \"nav-item\", 2, \"cursor\", \"pointer\", 3, \"click\"]], template: function DesignComponent_Template(rf, ctx) { if (rf & 1) {\r\n        i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1)(2, \"div\", 2)(3, \"div\", 1)(4, \"form\", 3)(5, \"p\")(6, \"strong\");\r\n        i0.ɵɵtext(7, \"Choose colors:\");\r\n        i0.ɵɵelementEnd()();\r\n        i0.ɵɵelementStart(8, \"p\");\r\n        i0.ɵɵtext(9, \"Select all colors\");\r\n        i0.ɵɵelementEnd();\r\n        i0.ɵɵtemplate(10, DesignComponent_div_10_Template, 1, 4, \"div\", 4);\r\n        i0.ɵɵelementStart(11, \"p\");\r\n        i0.ɵɵtext(12, \"Select size(s):\");\r\n        i0.ɵɵelementEnd();\r\n        i0.ɵɵelementStart(13, \"p\");\r\n        i0.ɵɵtext(14, \"Select all sizes\");\r\n        i0.ɵɵelementEnd();\r\n        i0.ɵɵtemplate(15, DesignComponent_div_15_Template, 4, 3, \"div\", 5);\r\n        i0.ɵɵelementEnd();\r\n        i0.ɵɵelementStart(16, \"div\", 1)(17, \"div\", 6)(18, \"button\", 7);\r\n        i0.ɵɵlistener(\"click\", function DesignComponent_Template_button_click_18_listener() { return ctx.generateMockup(); });\r\n        i0.ɵɵtext(19, \"Generate preview\");\r\n        i0.ɵɵelementEnd()()()()();\r\n        i0.ɵɵelementStart(20, \"div\", 2)(21, \"div\", 1)(22, \"div\", 8)(23, \"ul\", 9);\r\n        i0.ɵɵtemplate(24, DesignComponent_li_24_Template, 3, 4, \"li\", 10);\r\n        i0.ɵɵelementEnd()()();\r\n        i0.ɵɵelementStart(25, \"canvas\", 11, 12);\r\n        i0.ɵɵlistener(\"mousedown\", function DesignComponent_Template_canvas_mousedown_25_listener($event) { return ctx.mouseDown($event); })(\"mouseup\", function DesignComponent_Template_canvas_mouseup_25_listener($event) { return ctx.mouseUp($event); })(\"mousemove\", function DesignComponent_Template_canvas_mousemove_25_listener($event) { return ctx.onMouseMove($event); });\r\n        i0.ɵɵelementEnd()()()();\r\n    } if (rf & 2) {\r\n        i0.ɵɵadvance(10);\r\n        i0.ɵɵproperty(\"ngForOf\", ctx.variantColors);\r\n        i0.ɵɵadvance(5);\r\n        i0.ɵɵproperty(\"ngForOf\", ctx.variantSizes);\r\n        i0.ɵɵadvance(9);\r\n        i0.ɵɵproperty(\"ngForOf\", ctx.templates);\r\n    } }, directives: [i4.ɵNgNoValidate, i4.NgControlStatusGroup, i4.NgForm, i5.NgForOf], styles: [\".example-list[_ngcontent-%COMP%] {\\r\\n  width: 500px;\\r\\n  max-width: 100%;\\r\\n  border: solid 1px #ccc;\\r\\n  min-height: 40px;\\r\\n  display: block;\\r\\n  background: white;\\r\\n  border-radius: 4px;\\r\\n  overflow: hidden;\\r\\n}\\r\\n\\r\\n.example-box[_ngcontent-%COMP%] {\\r\\n  padding: 10px;\\r\\n  border-bottom: solid 1px #ccc;\\r\\n  color: rgba(0, 0, 0, 0.87);\\r\\n  display: flex;\\r\\n  flex-direction: row;\\r\\n  align-items: center;\\r\\n  justify-content: space-between;\\r\\n  box-sizing: border-box;\\r\\n  cursor: move;\\r\\n  background: white;\\r\\n  font-size: 14px;\\r\\n}\\r\\n\\r\\n.cdk-drag-preview[_ngcontent-%COMP%] {\\r\\n  box-sizing: border-box;\\r\\n  border-radius: 4px;\\r\\n  box-shadow: 0 5px 5px -3px rgba(0, 0, 0, 0.2),\\r\\n              0 8px 10px 1px rgba(0, 0, 0, 0.14),\\r\\n              0 3px 14px 2px rgba(0, 0, 0, 0.12);\\r\\n}\\r\\n\\r\\n.cdk-drag-placeholder[_ngcontent-%COMP%] {\\r\\n  opacity: 0;\\r\\n}\\r\\n\\r\\n.cdk-drag-animating[_ngcontent-%COMP%] {\\r\\n  transition: transform 250ms cubic-bezier(0, 0, 0.2, 1);\\r\\n}\\r\\n\\r\\n.example-box[_ngcontent-%COMP%]:last-child {\\r\\n  border: none;\\r\\n}\\r\\n\\r\\n.example-list.cdk-drop-list-dragging[_ngcontent-%COMP%]   .example-box[_ngcontent-%COMP%]:not(.cdk-drag-placeholder) {\\r\\n  transition: transform 250ms cubic-bezier(0, 0, 0.2, 1);\\r\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImRlc2lnbi5jb21wb25lbnQuY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0VBQ0UsWUFBWTtFQUNaLGVBQWU7RUFDZixzQkFBc0I7RUFDdEIsZ0JBQWdCO0VBQ2hCLGNBQWM7RUFDZCxpQkFBaUI7RUFDakIsa0JBQWtCO0VBQ2xCLGdCQUFnQjtBQUNsQjs7QUFFQTtFQUNFLGFBQWE7RUFDYiw2QkFBNkI7RUFDN0IsMEJBQTBCO0VBQzFCLGFBQWE7RUFDYixtQkFBbUI7RUFDbkIsbUJBQW1CO0VBQ25CLDhCQUE4QjtFQUM5QixzQkFBc0I7RUFDdEIsWUFBWTtFQUNaLGlCQUFpQjtFQUNqQixlQUFlO0FBQ2pCOztBQUVBO0VBQ0Usc0JBQXNCO0VBQ3RCLGtCQUFrQjtFQUNsQjs7Z0RBRThDO0FBQ2hEOztBQUVBO0VBQ0UsVUFBVTtBQUNaOztBQUVBO0VBQ0Usc0RBQXNEO0FBQ3hEOztBQUVBO0VBQ0UsWUFBWTtBQUNkOztBQUVBO0VBQ0Usc0RBQXNEO0FBQ3hEIiwiZmlsZSI6ImRlc2lnbi5jb21wb25lbnQuY3NzIiwic291cmNlc0NvbnRlbnQiOlsiLmV4YW1wbGUtbGlzdCB7XHJcbiAgd2lkdGg6IDUwMHB4O1xyXG4gIG1heC13aWR0aDogMTAwJTtcclxuICBib3JkZXI6IHNvbGlkIDFweCAjY2NjO1xyXG4gIG1pbi1oZWlnaHQ6IDQwcHg7XHJcbiAgZGlzcGxheTogYmxvY2s7XHJcbiAgYmFja2dyb3VuZDogd2hpdGU7XHJcbiAgYm9yZGVyLXJhZGl1czogNHB4O1xyXG4gIG92ZXJmbG93OiBoaWRkZW47XHJcbn1cclxuXHJcbi5leGFtcGxlLWJveCB7XHJcbiAgcGFkZGluZzogMTBweDtcclxuICBib3JkZXItYm90dG9tOiBzb2xpZCAxcHggI2NjYztcclxuICBjb2xvcjogcmdiYSgwLCAwLCAwLCAwLjg3KTtcclxuICBkaXNwbGF5OiBmbGV4O1xyXG4gIGZsZXgtZGlyZWN0aW9uOiByb3c7XHJcbiAgYWxpZ24taXRlbXM6IGNlbnRlcjtcclxuICBqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWJldHdlZW47XHJcbiAgYm94LXNpemluZzogYm9yZGVyLWJveDtcclxuICBjdXJzb3I6IG1vdmU7XHJcbiAgYmFja2dyb3VuZDogd2hpdGU7XHJcbiAgZm9udC1zaXplOiAxNHB4O1xyXG59XHJcblxyXG4uY2RrLWRyYWctcHJldmlldyB7XHJcbiAgYm94LXNpemluZzogYm9yZGVyLWJveDtcclxuICBib3JkZXItcmFkaXVzOiA0cHg7XHJcbiAgYm94LXNoYWRvdzogMCA1cHggNXB4IC0zcHggcmdiYSgwLCAwLCAwLCAwLjIpLFxyXG4gICAgICAgICAgICAgIDAgOHB4IDEwcHggMXB4IHJnYmEoMCwgMCwgMCwgMC4xNCksXHJcbiAgICAgICAgICAgICAgMCAzcHggMTRweCAycHggcmdiYSgwLCAwLCAwLCAwLjEyKTtcclxufVxyXG5cclxuLmNkay1kcmFnLXBsYWNlaG9sZGVyIHtcclxuICBvcGFjaXR5OiAwO1xyXG59XHJcblxyXG4uY2RrLWRyYWctYW5pbWF0aW5nIHtcclxuICB0cmFuc2l0aW9uOiB0cmFuc2Zvcm0gMjUwbXMgY3ViaWMtYmV6aWVyKDAsIDAsIDAuMiwgMSk7XHJcbn1cclxuXHJcbi5leGFtcGxlLWJveDpsYXN0LWNoaWxkIHtcclxuICBib3JkZXI6IG5vbmU7XHJcbn1cclxuXHJcbi5leGFtcGxlLWxpc3QuY2RrLWRyb3AtbGlzdC1kcmFnZ2luZyAuZXhhbXBsZS1ib3g6bm90KC5jZGstZHJhZy1wbGFjZWhvbGRlcikge1xyXG4gIHRyYW5zaXRpb246IHRyYW5zZm9ybSAyNTBtcyBjdWJpYy1iZXppZXIoMCwgMCwgMC4yLCAxKTtcclxufSJdfQ== */\"] });\r\nexport class MockupDialog {\r\n    constructor(http, \r\n    // private dt: PresentationService,\r\n    dialogRef, data) {\r\n        this.http = http;\r\n        this.dialogRef = dialogRef;\r\n        this.data = data;\r\n    }\r\n    onNoClick() {\r\n        this.dialogRef.close();\r\n    }\r\n    ngOnInit() {\r\n        let self = this;\r\n        this.refreshIntervalId = setInterval(function () {\r\n            self.getMockupResults(self.data.task_id).subscribe((val) => {\r\n                self.serverData = val;\r\n                if (self.serverData.result.status == \"completed\") {\r\n                    self.clearMockupCheck();\r\n                }\r\n            }, response => {\r\n            }, () => {\r\n                // console.log(\"The observable is now completed.\");\r\n            });\r\n        }, 3000);\r\n    }\r\n    clearMockupCheck() {\r\n        clearInterval(this.refreshIntervalId);\r\n    }\r\n    getMockupResults(taskId) {\r\n        return this.http.post('http://localhost/smerch/printful.php', {\r\n            \"fetch\": \"check-mockup-task\",\r\n            \"info\": { \"task_id\": taskId }\r\n        });\r\n    }\r\n}\r\nMockupDialog.ɵfac = function MockupDialog_Factory(t) { return new (t || MockupDialog)(i0.ɵɵdirectiveInject(i2.HttpClient), i0.ɵɵdirectiveInject(i3.MatDialogRef), i0.ɵɵdirectiveInject(MAT_DIALOG_DATA)); };\r\nMockupDialog.ɵcmp = /*@__PURE__*/ i0.ɵɵdefineComponent({ type: MockupDialog, selectors: [[\"mockup-dialog\"]], decls: 14, vars: 1, consts: [[\"mat-dialog-title\", \"\"], [\"mat-dialog-content\", \"\"], [\"mat-dialog-actions\", \"\"], [\"mat-raised-button\", \"\", \"color\", \"primary\"], [1, \"btn\", \"btn-info\", 2, \"margin\", \"10px 10px 0 0\"], [1, \"row\"], [\"align\", \"center\", 1, \"col-md-8\"], [2, \"height\", \"550px\", \"overflow\", \"scroll\"], [\"style\", \"padding: 20px;\", 4, \"ngFor\", \"ngForOf\"], [2, \"padding\", \"20px\"], [1, \"img-fluid\", 3, \"src\"]], template: function MockupDialog_Template(rf, ctx) { if (rf & 1) {\r\n        i0.ɵɵelementStart(0, \"h1\", 0);\r\n        i0.ɵɵtext(1, \"Generating mockup...\");\r\n        i0.ɵɵelementEnd();\r\n        i0.ɵɵelement(2, \"div\", 1);\r\n        i0.ɵɵelementStart(3, \"div\", 2);\r\n        i0.ɵɵelement(4, \"button\", 3)(5, \"button\", 3);\r\n        i0.ɵɵelementStart(6, \"button\", 4);\r\n        i0.ɵɵtext(7, \"Save design\");\r\n        i0.ɵɵelementEnd();\r\n        i0.ɵɵelementStart(8, \"button\", 4);\r\n        i0.ɵɵtext(9, \"Place print order\");\r\n        i0.ɵɵelementEnd()();\r\n        i0.ɵɵelementStart(10, \"div\", 5)(11, \"div\", 6)(12, \"div\", 7);\r\n        i0.ɵɵtemplate(13, MockupDialog_div_13_Template, 2, 1, \"div\", 8);\r\n        i0.ɵɵelementEnd()()();\r\n    } if (rf & 2) {\r\n        i0.ɵɵadvance(13);\r\n        i0.ɵɵproperty(\"ngForOf\", ctx.serverData == null ? null : ctx.serverData.result.mockups);\r\n    } }, directives: [i3.MatDialogTitle, i3.MatDialogContent, i3.MatDialogActions, i5.NgForOf], encapsulation: 2 });\r\n"]},"metadata":{},"sourceType":"module"}